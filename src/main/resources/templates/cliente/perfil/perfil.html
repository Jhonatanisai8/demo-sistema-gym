<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/client-layout}">
<head>
    <title layout:title-template="Mi Perfil - %s">Ver Perfil</title>
    <th:block layout:fragment="styles"></th:block>
</head>
<body>
<th:block layout:fragment="header">
    <h1 class="h3"><i class="bi bi-person-fill me-2"></i>Mi Perfil</h1>
</th:block>

<th:block layout:fragment="content">
    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle-fill me-2"></i> <span th:text="${successMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i> <span th:text="${errorMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="card shadow-lg mb-4 border-0">
        <div class="card-header bg-primary text-white py-3"><h5 class="mb-0 fs-5"><i class="bi bi-info-circle me-2"></i>Información
            Personal</h5></div>
        <div class="card-body p-4">
            <div class="row align-items-center mb-4">
                <div class="col-md-auto text-center">
                    <div class="profile-image-container mb-3"><img
                            th:src="${usuario.rutaImagen != null and !usuario.rutaImagen.isEmpty() ? '/assest/' + usuario.rutaImagen : '/images/default-avatar.png'}"
                            alt="Imagen de perfil"
                            class="img-fluid rounded-circle border border-3 border-primary shadow-sm"
                            style="width: 150px; height: 150px; object-fit: cover;"></div>
                    </p>
                </div>
                <div class="col-md"><h3 class="mb-2 text-primary" th:text="${usuario.nombreCompleto}">Nombre Completo
                    del Usuario</h3>
                    <p class="lead text-muted" th:text="${usuario.email}">email@example.com</p>
                    <hr class="my-3">
                    <div class="row">
                        <div class="col-sm-6 mb-2">
                            <p class="mb-0 text-muted"><strong>Nombre de Usuario:</strong></p>
                            <p class="fw-bold" th:text="${usuario.nombreUsuario}"></p>
                        </div>
                        <div class="col-sm-6 mb-2">
                            <p class="mb-0 text-muted"><strong>Teléfono:</strong></p>
                            <p class="fw-bold" th:text="${usuario.telefono ?: 'N/A'}"></p>
                        </div>
                        <div class="col-sm-6 mb-2">
                            <p class="mb-0 text-muted"><strong>Fecha de Nacimiento:</strong></p>
                            <p class="fw-bold"
                               th:text="${usuario.fechaNacimiento != null ? #temporals.format(usuario.fechaNacimiento, 'dd-MM-yyyy') : 'N/A'}"></p>
                        </div>
                        <div class="col-sm-6 mb-2">
                            <p class="mb-0 text-muted"><strong>Género:</strong></p>
                            <p class="fw-bold" th:text="${usuario.genero ?: 'N/A'}"></p>
                        </div>
                    </div>
                </div>
            </div>

            <h5 class="mt-4 mb-3 text-secondary"><i class="bi bi-geo-alt-fill me-2"></i>Detalles Adicionales</h5>
            <div class="row">
                <div class="col-md-6 mb-2">
                    <p class="mb-0 text-muted"><strong>Dirección:</strong></p>
                    <p class="fw-bold" th:text="${usuario.direccion ?: 'N/A'}"></p>
                </div>
                <div class="col-md-6 mb-2">
                    <p class="mb-0 text-muted"><strong>Altura:</strong></p>
                    <p class="fw-bold"
                       th:text="${usuario.altura != null ? #numbers.formatDecimal(usuario.altura, 0, 'COMMA', 2, 'POINT') + ' cm' : 'N/A'}"></p>
                </div>
                <div class="col-md-6 mb-2">
                    <p class="mb-0 text-muted"><strong>Peso:</strong></p>
                    <p class="fw-bold"
                       th:text="${usuario.peso != null ? #numbers.formatDecimal(usuario.peso, 0, 'COMMA', 2, 'POINT') + ' kg' : 'N/A'}"></p>
                </div>
                <div class="col-md-6 mb-2">
                    <p class="mb-0 text-muted"><strong>Contacto de Emergencia:</strong></p>
                    <p class="fw-bold" th:text="${usuario.contactoEmergencia ?: 'N/A'}"></p>
                </div>
                <div class="col-md-6 mb-2">
                    <p class="mb-0 text-muted"><strong>Teléfono de Emergencia:</strong></p>
                    <p class="fw-bold" th:text="${usuario.telefonoEmergencia ?: 'N/A'}"></p>
                </div>
                <div class="col-md-6 mb-2">
                    <p class="mb-0 text-muted"><strong>Miembro desde:</strong></p>
                    <p class="fw-bold" th:text="${#temporals.format(usuario.fechaRegistro, 'dd-MM-yyyy HH:mm')}"></p>
                </div>
            </div>
            <hr class="my-4">
            <div class="d-flex justify-content-center justify-content-md-start gap-3"><a
                    th:href="@{/cliente/perfil/editar}" class="btn btn-warning px-4 py-2 rounded-pill"><i
                    class="bi bi-pencil-square me-2"></i>Editar Perfil</a>
                <a th:href="@{/cliente/perfil/cambiar-contrasena}" class="btn btn-info px-4 py-2 rounded-pill"><i
                        class="bi bi-key me-2"></i>Cambiar Contraseña</a>
            </div>
        </div>
    </div>
    <div class="mt-3 text-center text-md-start"><a th:href="@{/cliente/dashboard}" class="btn btn-outline-secondary"><i
            class="bi bi-arrow-left-circle me-2"></i>Volver al Dashboard</a>
    </div>
</th:block>

<th:block layout:fragment="scripts"></th:block>
</body>
</html>